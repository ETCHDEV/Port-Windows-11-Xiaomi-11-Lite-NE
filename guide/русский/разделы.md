<img align="right" src="https://github.com/ETCHDEV/Port-Windows-11-Xiaomi-11-Lite-NE/blob/main/lisa.png" width="250" alt="Запуск Windows 11 на Mi 11 Lite NE">


# Запуск Windows на Mi 11 Lite NE/Mi 11 LE

## Установка

## Разбиение устройства на разделы

### Предварительные условия
- [ADB & Fastboot](https://developer.android.com/studio/releases/platform-tools)
- [parted для разметки хранилища](https://www.mediafire.com/file/s9bjano4pezphou/parted/file)

### Примечания:
> **Предупреждение** Если вы удалите какие-либо разделы через diskpart, Windows отправит команду UFS, которая сотрет все UFS-хранилище!
- Все ваши данные будут стерты! При необходимости создайте резервную копию.
- Эти команды не были полностью протестированы (только для устройства емкостью 256 ГБ).
- Не выполняйте одну и ту же команду дважды.
- НЕ ПЕРЕЗАГРУЖАЙТЕ ТЕЛЕФОН, если вы считаете, что допустили ошибку, обратитесь за помощью в Renegade Telegram.

#### ⚠️ Не выполняйте все команды сразу, выполняйте их по порядку!

#### ⚠️ НЕ ДЕЛАЙТЕ ОШИБОК!!! ПРИ НЕПРАВИЛЬНОМ ВЫПОЛНЕНИИ ПРИВЕДЕННЫХ НИЖЕ КОМАНД ВЫ МОЖЕТЕ СЛОМАТЬ УСТРОЙСТВО!!!

##### Загрузитесь в TWRP/OF или любой другой кастомный recovery, поддерживающий шифрование устройства/возможность доступа к разделу данных и имеющий поддержку adb.
##### Скопируйте раздел на телефон и войдите в оболочку adb, используя следующие команды:
```cmd
adb push parted /cache/
adb shell "chmod 755 /cache/parted"
adb shell
```

##### Изменение размера таблицы разделов
> Чтобы разделы Windows поместились
```sh
sgdisk --resize-table 64 /dev/block/sda
```

##### Начало разметки
```sh
cd /cache
./parted /dev/block/sda
```

##### Удаление раздела `userdata`.
> Убедиться в том, что 33 - это номер раздела userdata, можно, выполнив команду
> `print all`
```sh
rm 33
```

##### Создание разделов
> Если вы получите какое-либо предупреждающее сообщение с просьбой проигнорировать или отменить, просто введите i и нажмите Enter

<details>
<summary><b><strong>Для моделей емкостью 128 ГБ</strong></b></summary>



- Создайте раздел данных Android
```sh
mkpart userdata ext4 12.2GB 70.0GB
```

- Создайте раздел ESP (хранит данные загрузчика Windows и файлы EFI)
```sh
mkpart esp fat32 70.0GB 70.3GB 
```

- Создайте основной раздел, в котором будет установлена Windows, в
```sh
mkpart win ntfs 70.3GB 125GB
```

  </summary>
</details>

<details>
<summary><b><strong>Для моделей емкостью 256 ГБ</strong></b></summary>


- Создайте раздел данных Android (найдите, где заканчивается последняя часть с помощью print, и начните оттуда часть userdata)
```sh
mkpart userdata ext4 12.2GB 140.2GB
```

- Создайте раздел ESP (хранит данные загрузчика Windows и файлы EFI)
```sh
mkpart esp fat32 140.2GB 140.5GB
```

- Создайте основной раздел, на который будет установлена Windows
```sh
mkpart win ntfs 140.5GB 254GB
```
  </summary>
</details>

##### Сделать ESP partiton загрузочным, чтобы образ UEFI мог его обнаружить и выйти из системы.
```sh
set 34 esp on
quit
```
##### Перезагрузитесь в пользовательский recovery.
##### Снова запустите оболочку на компьютере.
```cmd
adb shell
```

##### Форматирование разделов
- Отформатируйте раздел ESP в формате FAT32
```sh
mkfs.fat -F32 -s1 /dev/block/by-name/esp -n ESPLISA
```

- Отформатируйте раздел Windows в формате NTFS
```sh
mkfs.ntfs -f /dev/block/by-name/win -L WINLISA
```
- Отформатируйте данные
Вернитесь в меню "Wipe" и нажмите "Format Data", 
затем введите `yes`.

##### Просто перезагрузите телефон и посмотрите, работает ли Android (Да, телефон отформатирован).

### Самое сложное сделано!!!, теперь перейдите к разделу

## [Следующий шаг: установка Windows](./установка.md)
